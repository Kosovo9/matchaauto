name = "match-auto-api"
main = "src/index.ts"
compatibility_date = "2024-12-30"
compatibility_flags = ["nodejs_compat"]

[vars]
API_ENVIRONMENT = "production"
SENTINEL_MODE = "active"

[[rules]]
type = "headers"
headers = { "X-Sentinel-Enabled" = "true" }

[[kv_namespaces]]
binding = "VIRAL_DATA"
id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

[[d1_databases]]
binding = "DB"
database_name = "match-auto-db"
database_id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

[[durable_objects]]
bindings = [
  { name = "CHAT_ROOM", class_name = "ChatRoom" },
  { name = "RATE_LIMIT_STORE", class_name = "RateLimitStore" }
]

[[migrations]]
tag = "v1"
new_classes = ["ChatRoom", "RateLimitStore"]
